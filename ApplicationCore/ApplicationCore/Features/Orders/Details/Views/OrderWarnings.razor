@using Domain.Orders.Entities
@using Domain.Orders.Entities.Products

@if (_products.Length > 0) {
    <div class="bg-amber-300 border border-amber-400 p-5 rounded-lg m-5 text-amber-900">
        <h3 class="text-lg font-bold">Warnings</h3>

        @foreach (var product in _products) {
            <ul>
                <li>
                    <span class="font-semibold">@product.ProductNumber - @product.GetDescription()</span>
                    <ul class="list-disc ml-6">
                        @foreach (var note in product.ProductionNotes) {
                            <li>@note</li>
                        }
                    </ul>
                </li>
            </ul>
        }
    </div>
}

@code {

    [Parameter]
    [EditorRequired]
    public Order Order { get; set; } = default!;

    private IProduct[] _products = [];

    protected override void OnInitialized() {
        _products = Order.Products
                        .Where(p => p.ProductionNotes.Count > 0)
                        .ToArray();
    }

}
