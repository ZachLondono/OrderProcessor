@page "/orders/details"
@using ApplicationCore.Features.Orders.Details
@using ApplicationCore.Features.Orders.Shared.Domain.Entities;
@using ApplicationCore.Features.Orders.Shared.State;
@using ApplicationCore.Shared.Services;
@using ApplicationCore.Widgets.Orders.OrderDelete
@using ApplicationCore.Widgets.Orders.OrderExport
@using ApplicationCore.Widgets.Orders.OrderRelease
@inject OrderState OrderState
@inject NavigationService Nav

<div>

    <section id="orderDetails">
        <OrderDetails>
            <div class="flex flex-col space-y-5">
                <OrderExportWidget Order="OrderState.Order" />
                <OrderReleaseWidget Orders="GetOrder()" />
                <OrderDeleteWidget OrderId="OrderState.Order?.Id ?? Guid.Empty" OnOrderDeleted="OnOrderDeleted" />
            </div>
        </OrderDetails>
    </section>

</div>

@code {

    public List<Order> GetOrder() {
        if (OrderState.Order is null) {
            return new() ;
        }
        return new() { OrderState.Order };
    }

    public void OnOrderDeleted() {
        Nav.NavigateToOrderListPage();
    }

}
